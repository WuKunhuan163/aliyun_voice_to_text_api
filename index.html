<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«API</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’¬</text></svg>">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="assets/stylesheets/main.css">
</head>
<body>
    <div class="container">
        <h1>é˜¿é‡Œäº‘è¯­éŸ³è¯†åˆ«API</h1>
        
        <!-- APIé…ç½®åŒºåŸŸ -->
        <div class="config-section">
                            <div class="form-group">
                <label>APIåœ°å€:</label>
                <div class="input-with-copy">
                    <input type="text" id="apiUrlField" value="https://aliyun-voice-to-text-api.vercel.app/api/recognize" disabled readonly class="readonly-field">
                    <button type="button" class="copy-button" onclick="copyToClipboard('apiUrlField')" title="å¤åˆ¶APIåœ°å€">
                        <i class='bx bx-copy'></i>
                    </button>
                </div>
            </div>
            
            
            <div class="form-group">
                <label for="appKey">AppKey <span class="required">*</span></label>
                <input type="text" id="appKey" placeholder="ä»é˜¿é‡Œäº‘NLSæ§åˆ¶å°é¡¹ç›®ä¸­è·å–">
            </div>
            <div class="form-group">
                <label for="accessKeyId">AccessKey ID <span class="required">*</span></label>
                <input type="text" id="accessKeyId" placeholder="ä»RAMç”¨æˆ·ç®¡ç†é¡µé¢è·å–">
            </div>
            <div class="form-group">
                <label for="accessKeySecret">AccessKey Secret <span class="required">*</span></label>
                <input type="password" id="accessKeySecret" placeholder="åœ¨RAMç”¨æˆ·ç®¡ç†é¡µé¢åˆ›å»º">
            </div>
            
            <div class="form-group">
                <label>Token:</label>
                <div class="input-with-copy">
                    <input type="text" id="tokenField" value="å°†åœ¨å¡«å†™å¯†é’¥åè‡ªåŠ¨è·å–..." disabled readonly class="readonly-field">
                    <button type="button" class="copy-button" onclick="copyToClipboard('tokenField')" title="å¤åˆ¶Token">
                        <i class='bx bx-copy'></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- è½¬å½•ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
        <div class="transcription-section">
            <div class="transcription-progress" id="transcriptionProgress">
                <div class="progress-bar" id="progressBar"></div>
                <div class="waveform-mini" id="waveformMini">
                    <!-- æ³¢å½¢æ¡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            <div id="transcriptionResult" class="transcription-textarea" 
                 data-placeholder="è¯·å…ˆé…ç½®é˜¿é‡Œäº‘å¯†é’¥ä¿¡æ¯..."></div>
        </div>

        <!-- å½•éŸ³æµ‹è¯•åŒºåŸŸ -->
        <div class="record-section">
            <button id="recordButton" class="record-button" disabled>å¼€å§‹å½•éŸ³æµ‹è¯•</button>
            <button id="downloadButton" class="download-button" style="display: none;">ä¸‹è½½å½•éŸ³</button>
        </div>
    </div>

    <script src="assets/scripts/main.js"></script>
    <script>
        // å¤åˆ¶åˆ°å‰ªè´´æ¿åŠŸèƒ½
        function copyToClipboard(fieldId) {
            const field = document.getElementById(fieldId);
            const text = field.value;
            
            if (!text || text === 'å°†åœ¨å¡«å†™å¯†é’¥åè‡ªåŠ¨è·å–...' || text === 'è·å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥å¯†é’¥ä¿¡æ¯') {
                alert('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹');
                return;
            }
            
            // ä½¿ç”¨ç°ä»£çš„Clipboard API
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(() => {
                    alert('å¤åˆ¶æˆåŠŸï¼');
                }).catch(() => {
                    // å¦‚æœClipboard APIå¤±è´¥ï¼Œä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•
                    fallbackCopy(field);
                });
            } else {
                // ä½¿ç”¨ä¼ ç»Ÿçš„å¤åˆ¶æ–¹æ³•
                fallbackCopy(field);
            }
        }
        
        function fallbackCopy(field) {
            try {
                field.select();
                field.setSelectionRange(0, 99999); // å¯¹ç§»åŠ¨è®¾å¤‡
                document.execCommand('copy');
                alert('å¤åˆ¶æˆåŠŸï¼');
            } catch (err) {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                console.error('å¤åˆ¶å¤±è´¥:', err);
            }
        }
    </script>
</body>
</html>
